"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3144],{33144:function(e,t,n){n.r(t),n.d(t,{default:function(){return C}});var i=n(85893);let r=n(964).ZP.div.withConfig({componentId:"sc-18f301cd-0"})(["align-items:center;background-color:#000;display:flex;height:100%;width:100%;canvas{image-rendering:pixelated;image-rendering:crisp-edges;position:absolute;top:0 !important;touch-action:none;-webkit-touch-callout:none;user-select:none;width:100%;}div,video{display:none;}.emulator-mouse-overlay{display:block;inset:0;position:absolute;}"]);var o=n(67294);let a={emulatorFunction:"dosWorker"},s=["__core-js_shared__","compiled","core","emulatorsUi","exports","WDOSBOX","worker"],l=".zip.save",c={".jsdos/dosbox.conf":"/Program Files/js-dos/dosbox.conf",".jsdos/jsdos.json":"/Program Files/js-dos/jsdos.json"},u=new Set(["Alt","ContextMenu","F1","F3","F5","F6","F7","F10","F11","F12"]);var d=n(1864),h=n(34772),f=n(59140),p=n(78743),w=n(26550),m=n(27972),b=n(62351),g=n(48764).Buffer;let y=async(e,t)=>{let{addFileToZip:i,isFileInZip:r}=await n.e(3456).then(n.bind(n,93456));return Object.entries(c).reduce(async(e,[n,o])=>{let a=await e;return a.length>0&&await r(a,n)?a:i(a,o,n,t)},Promise.resolve(e))};var x=(e,t,i,r)=>{let{appendFileToTitle:a}=(0,h.Z)(e),{exists:c,mkdirRecursive:u,readFile:x,updateFolder:v,writeFile:k}=(0,f.o)(),{linkElement:T,processes:{[e]:E}}=(0,p.z)(),{closing:$}=E||{},[j,C]=(0,o.useState)({}),S=(0,o.useCallback)(async(e,t,n=!1)=>{let i=`${(0,d.basename)(e)}${l}`;await c(w.Tl)||(await u(w.Tl),v((0,d.dirname)(w.Tl)));let o=(0,d.join)(w.Tl,i);if(void 0!==j[e]&&await k(o,g.from(await j[e].persist()||[]),!0)){if(t){let e=(0,d.join)(w.Xo,w.Tl),n=(0,d.join)(w.Xo,`${o}${w.Qy}`);await c(e)||(await u(e),v((0,d.dirname)(w.Tl))),await k(n,t,!0)}n&&r?.stop(),v(w.Tl,i)}},[j,r,c,u,v,k]),F=(0,o.useCallback)(async()=>{let o;let[u]=Object.keys(j);u&&S(u);let h=t?await x(t):g.from(""),f=(0,m.RT)(t),{zipAsync:p}=await n.e(3456).then(n.bind(n,93456)),v=async e=>g.from(await p({[(0,d.basename)(t)]:e})),k=async e=>(0,m.YS)(await y(e,x)),E=".exe"===f?await v(h):h;if(".jsdos"===f)o=(0,m.YS)(E);else try{o=await k(E)}catch{o=await k(await v(h))}let $=(0,d.join)(w.Tl,`${(0,d.basename)(t)}${l}`),F=await c($)?(0,m.YS)(await x($)):void 0,L=await r?.run(o,F);if(L){let n=i.current?.querySelector("canvas");n instanceof HTMLCanvasElement&&(T(e,"peekElement",n),C({[t]:L}),a((0,d.basename)(t)),(0,m.EK)(o),F&&(0,m.EK)(F),(0,b.od)(s))}},[a,S,i,j,r,c,e,T,x,t]);return(0,o.useEffect)(()=>(!E||$||!r||t in j||(C({[t]:void 0}),F()),()=>{if(t&&$){let e=e=>{window.setTimeout(()=>S(t,e,$),w.jx.WINDOW)};(async()=>{let e=await j[t]?.screenshot();return e?(0,m.fv)(e):void 0})().then(e).catch(e)}}),[S,$,j,r,F,E,t]),j[t]},v=n(81338),k=n(49822),T=n(12691);let E=e=>{u.has(e.key)&&e.preventDefault()};var $=({containerRef:e,id:t,loading:n,setLoading:i,url:r})=>{let{updateWindowSize:s}=(0,k.Z)(t),[l,c]=(0,o.useState)(),u=(0,v.Z)(),d=(0,o.useRef)(!1),{foregroundId:h}=(0,T.k)(),f=x(t,r,e,l),{closeWithTransition:b,processes:{[t]:{libs:g=[]}={}}={}}=(0,p.z)();(0,o.useEffect)(()=>{l||d.current||(d.current=!0,(0,m.mb)(g).then(()=>{if(window.emulators&&(window.emulators.pathPrefix="/Program Files/js-dos/",e.current)){let t=e.current.closest("section");t?.addEventListener("keydown",E,{capture:!0}),t?.addEventListener("keyup",E,{capture:!0}),t?.addEventListener("focus",()=>e.current?.focus(w.eS),{passive:!0}),c(window.Dos(e.current,a))}}))},[e,l,g]),(0,o.useEffect)(()=>{if(f&&n){s(f.height(),f.width());let n=f.events();n.onMessage((e,n)=>{if(n.startsWith("[LOG_EXEC]")){let[,e]=n.split("[LOG_EXEC]"),[i]=e.replace("Parsing command line: ","").split(" ");"EXIT"===i.toUpperCase()&&b(t)}}),n.onFrameSize(()=>{let t=e.current?.querySelector("canvas"),[n,i]=[(0,m.Vy)(t?.style.width),(0,m.Vy)(t?.style.height)],{height:r=0,width:o=0}=t?.getBoundingClientRect()||{};i&&n&&(i!==r||n!==o)&&s(i,n)}),n.onExit(()=>window.SimpleKeyboardInstances?.emulatorKeyboard?.destroy()),i(!1),u(window.JSDOS_FS,"JS-DOS")}},[b,e,f,l?.layers,t,n,u,i,s]),(0,o.useLayoutEffect)(()=>{t!==h||n||e.current?.focus(w.eS)},[e,n,h,t])},j=n(50834),C=({id:e})=>(0,i.jsx)(j.Z,{StyledComponent:r,id:e,useHook:$})},50834:function(e,t,n){var i=n(85893),r=n(5152),o=n.n(r),a=n(67294),s=n(54944),l=n(78743);let c=o()(()=>n.e(446).then(n.bind(n,60446)),{loadableGenerated:{webpack:()=>[60446]}});t.Z=(0,a.memo)(({id:e,useHook:t,StyledComponent:n,children:r})=>{let{processes:{[e]:{url:o=""}={}}}=(0,l.z)(),u=(0,a.useRef)(null),[d,h]=(0,a.useState)(!0),f=(0,a.useMemo)(()=>({contain:"strict",visibility:d?"hidden":"visible"}),[d]);return t({containerRef:u,id:e,loading:d,setLoading:h,url:o}),(0,i.jsxs)(i.Fragment,{children:[d&&(0,i.jsx)(c,{}),(0,i.jsx)(n,{ref:u,style:f,...(0,s.Z)({id:e}),children:r})]})})},81338:function(e,t,n){var i=n(67294),r=n(59140);t.Z=()=>{let{mountEmscriptenFs:e,unMapFs:t,updateFolder:n}=(0,r.o)(),o=(0,i.useRef)();return(0,i.useEffect)(()=>()=>{if(o.current){let e=o.current;o.current="",t(e,!0).then(()=>n("/",void 0,e)).catch(()=>{})}},[t,n]),(0,i.useCallback)(async(t,i)=>{if(!t)return;let r="";try{r=await e(t,i)}catch{}r&&(n("/",r),o.current=r)},[e,n])}},54944:function(e,t,n){var i=n(1864),r=n(67294),o=n(46013),a=n(36094),s=n(41893),l=n(59140),c=n(78743),u=n(12691),d=n(26550),h=n(27972);t.Z=({callback:e,directory:t=d.Ll,id:n,onDragLeave:f,onDragOver:p,updatePositions:w})=>{let{url:m}=(0,c.z)(),{iconPositions:b,sortOrders:g,setIconPositions:y}=(0,u.k)(),{mkdirRecursive:x,updateFolder:v,writeFile:k}=(0,l.o)(),T=(0,r.useCallback)(async(e,t,r)=>{if(n){if(t){let o=(0,i.join)(d.Ll,e);if(await x(d.Ll),await k(o,t,!0))return r===s.v.UPDATE_URL&&m(n,o),v(d.Ll,e),(0,i.basename)(o)}else r===s.v.UPDATE_URL&&m(n,e)}return""},[n,x,v,m,k]),{openTransferDialog:E}=(0,o.Z)();return{onDragLeave:f,onDragOver:e=>{p?.(e),(0,h.nK)(e)},onDrop:r=>{if(!d.my.has((0,h.RT)(t))){if(w&&r.target instanceof HTMLElement){let{files:e,text:n}=(0,a.p4)(r);if(0===e.length&&""===n)return;let o={x:r.clientX,y:r.clientY},s=[];if(n){try{s=JSON.parse(n)}catch{}if(!Array.isArray(s))return;let[e]=s;if(!e||e.startsWith(t)&&(0,i.basename)(e)===(0,i.relative)(t,e))return;s=s.map(e=>(0,i.basename)(e))}else s=e instanceof FileList?[...e].map(e=>e.name):[...e].map(e=>e.getAsFile()?.name||"").filter(Boolean);s=s.map(e=>{if(!b[`${t}/${e}`])return e;let n=0,r="";do n+=1,r=`${t}/${(0,i.basename)(e,(0,i.extname)(e))} (${n})${(0,i.extname)(e)}`;while(b[r]);return(0,i.basename)(r)}),(0,h.vi)(t,r.target,b,g,o,s,y)}(0,a.WG)(r,e||T,t,E,!!n)}}}}},59886:function(e,t,n){n.d(t,{BS:function(){return a},FC:function(){return r},F_:function(){return i},wV:function(){return o}});let i={bottom:!1,bottomLeft:!1,bottomRight:!1,left:!1,right:!1,top:!1,topLeft:!1,topRight:!1},r={bottom:!0,bottomLeft:!0,bottomRight:!0,left:!0,right:!0,top:!0,topLeft:!0,topRight:!0},o=30,a=166,s={cancel:".cancel",dragHandleClassName:"handle",enableUserSelectHack:!1,minHeight:`${o}px`,minWidth:`${a}px`,resizeHandleStyles:{bottom:{bottom:"-3px",cursor:"ns-resize",height:"6px"},bottomLeft:{bottom:"-3px",cursor:"nesw-resize",height:"12px",left:"-3px",width:"12px"},bottomRight:{bottom:"-3px",cursor:"nwse-resize",height:"12px",right:"-3px",width:"12px"},left:{cursor:"ew-resize",left:"-3px",width:"6px"},right:{cursor:"ew-resize",right:"-3px",width:"6px"},top:{cursor:"ns-resize",height:"6px",top:"-3px"},topLeft:{cursor:"nwse-resize",height:"12px",left:"-3px",top:"-3px",width:"12px"},topRight:{cursor:"nesw-resize",height:"12px",right:"-3px",top:"-3px",width:"12px"}}};t.ZP=s},38939:function(e,t,n){n.d(t,{Rf:function(){return s},b$:function(){return u},hu:function(){return a},ix:function(){return c},mZ:function(){return l}});var i=n(59886),r=n(26550),o=n(27972);let a=(e,t,n=[],i=0)=>{let[a]=e.split(r.CC),s=`${a}${r.CC}`,l=n.find(e=>e.startsWith(s))||"",{componentWindow:c}=t?.[l]||{},{x:u=0,y:d=0,width:h=0,height:f=0}=c?.getBoundingClientRect()||{};return!(u+i+h>(0,o.E9)()||d+i+f>(0,o.sI)())&&(u||d)?{x:u+i,y:d+i}:void 0},s=({height:e,width:t})=>{let[n,i]=[(0,o.sI)(),(0,o.E9)()];return{x:Math.floor(i/2-(0,o.Vy)(t)/2),y:Math.floor((n-r.bK)/2-(0,o.Vy)(e)/2)}},l={BOTTOM:15,LEFT:150,RIGHT:50,TOP:15},c=(e,t,n=!1)=>{let{position:i,size:r}=e||{},{x:a=0,y:s=0}=i||{},{height:c=0,width:u=0}=r||{};return n?a+l.RIGHT>t.x||a+(0,o.Vy)(u)-l.LEFT<0||s+l.BOTTOM>t.y||s+l.TOP<0:a<0||s<0||a+(0,o.Vy)(u)>t.x||s+(0,o.Vy)(c)>t.y},u=(e,t)=>{let n=Number(e.height),a=Number(e.width),[s,l]=[(0,o.sI)(),(0,o.E9)()],c=s-r.bK,u=Math.max(i.wV,Math.min(n,c)),d=Math.max(i.BS,Math.min(a,l));if(!t)return{height:u,width:d};let h=n===u,f=a===d;return h||f?h?f?{height:u,width:d}:{height:Math.round(u/(a/d)),width:d}:{height:u,width:Math.round(d/(n/u))}:n>a?{height:u,width:Math.round(d/(c/u))}:{height:Math.round(u/(l/d)),width:d}}},34772:function(e,t,n){var i=n(67294),r=n(78743),o=n(28272),a=n(26550);t.Z=e=>{let{title:t}=(0,r.z)(),[n]=e.split(a.CC),{title:s}=o.Z[n]||{};return{appendFileToTitle:(0,i.useCallback)((n,i)=>{let r=n?` - ${n}${i?` ${a.xy}`:""}`:"";t(e,`${s}${r}`)},[e,s,t]),prependFileToTitle:(0,i.useCallback)((n,i,r)=>{let o=n?`${i?`${a.xy} `:""}${n}${r?" ":" - "}`:"";t(e,`${o}${s}`)},[e,s,t])}}},49822:function(e,t,n){var i=n(964),r=n(67294),o=n(38939),a=n(78743),s=n(12691);t.Z=e=>{let{setWindowStates:t}=(0,s.k)(),{processes:{[e]:{lockAspectRatio:n=!1,maximized:l=!1}={}}={}}=(0,a.z)(),{sizes:{titleBar:c}}=(0,i.Fg)();return{updateWindowSize:(0,r.useCallback)((i,r)=>t(t=>({...t,[e]:{...t?.[e],maximized:l,size:(0,o.b$)({height:i+c.height,width:r},n)}})),[e,n,l,t,c.height])}}},62351:function(e,t,n){n.d(t,{H3:function(){return s},od:function(){return i},wz:function(){return a}});let i=e=>e.forEach(e=>{if(e in window)try{delete window[e]}finally{Object.assign(window,{[e]:void 0})}}),r=e=>{let t;Object.defineProperty(window,e,{get:()=>window.lockedGlobals?.[e]?void 0:t,set(n){window.lockedGlobals?.[e]||(t=n)}})},o=(e,t)=>{window.lockedGlobals={...window.lockedGlobals,[e]:t}},a=e=>o(e,!0),s=e=>{Object.getOwnPropertyDescriptor(window,e)||r(e),o(e,!1)}}}]);