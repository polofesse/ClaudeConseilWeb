"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5361],{65361:function(e,t,n){n.r(t),n.d(t,{default:function(){return m}});var i=n(85893),a=n(964);let r=a.ZP.div.withConfig({componentId:"sc-bf9d7d9b-0"})(["height:",";width:100%;canvas{height:100%;width:100%;}"],({theme:e})=>`calc(100% - ${e.sizes.titleBar.height}px)`);var s=n(67294),l=n(81338),o=n(78743),u=n(12691),c=n(26550),f=n(27972),h=({containerRef:e,id:t,setLoading:n})=>{let{processes:{[t]:i}={}}=(0,o.z)(),r=(0,l.Z)(),{windowStates:{[t]:h}}=(0,u.k)(),{size:d}=h||{},{libs:m}=i||{},{sizes:{titleBar:w}}=(0,a.Fg)(),C=(0,s.useCallback)(()=>e.current?.querySelector("canvas"),[e]);(0,s.useEffect)(()=>{d&&(window.CCModule.setCanvasSize?.(f.Vy(d.width),f.Vy(d.height)-w.height),window.CCModule.OnResize?.())},[d,w.height]),(0,s.useEffect)(()=>{window.CCModule||setTimeout(()=>{let e=C();window.CCModule={arguments:["Singleplayer"],canvas:e,postRun:[()=>{n(!1),r(window.FS,"ClassiCube")},()=>{let{width:t,height:n}=e.getBoundingClientRect()||{};e.width=t,e.height=n}],print:console.info,setStatus:console.info},(0,f.mb)(m)},c.jx.WINDOW)},[C,m,r,n])},d=n(50834),m=({id:e})=>(0,i.jsx)(d.Z,{StyledComponent:r,id:e,useHook:h,children:(0,i.jsx)("canvas",{onContextMenu:f.nK})})},50834:function(e,t,n){var i=n(85893),a=n(5152),r=n.n(a),s=n(67294),l=n(54944),o=n(78743);let u=r()(()=>n.e(446).then(n.bind(n,60446)),{loadableGenerated:{webpack:()=>[60446]}});t.Z=(0,s.memo)(({id:e,useHook:t,StyledComponent:n,children:a})=>{let{processes:{[e]:{url:r=""}={}}}=(0,o.z)(),c=(0,s.useRef)(null),[f,h]=(0,s.useState)(!0),d=(0,s.useMemo)(()=>({contain:"strict",visibility:f?"hidden":"visible"}),[f]);return t({containerRef:c,id:e,loading:f,setLoading:h,url:r}),(0,i.jsxs)(i.Fragment,{children:[f&&(0,i.jsx)(u,{}),(0,i.jsx)(n,{ref:c,style:d,...(0,l.Z)({id:e}),children:a})]})})},81338:function(e,t,n){var i=n(67294),a=n(59140);t.Z=()=>{let{mountEmscriptenFs:e,unMapFs:t,updateFolder:n}=(0,a.o)(),r=(0,i.useRef)();return(0,i.useEffect)(()=>()=>{if(r.current){let e=r.current;r.current="",t(e,!0).then(()=>n("/",void 0,e)).catch(()=>{})}},[t,n]),(0,i.useCallback)(async(t,i)=>{if(!t)return;let a="";try{a=await e(t,i)}catch{}a&&(n("/",a),r.current=a)},[e,n])}},54944:function(e,t,n){var i=n(1864),a=n(67294),r=n(46013),s=n(36094),l=n(41893),o=n(59140),u=n(78743),c=n(12691),f=n(26550),h=n(27972);t.Z=({callback:e,directory:t=f.Ll,id:n,onDragLeave:d,onDragOver:m,updatePositions:w})=>{let{url:C}=(0,u.z)(),{iconPositions:b,sortOrders:g,setIconPositions:p}=(0,c.k)(),{mkdirRecursive:v,updateFolder:y,writeFile:k}=(0,o.o)(),x=(0,a.useCallback)(async(e,t,a)=>{if(n){if(t){let r=(0,i.join)(f.Ll,e);if(await v(f.Ll),await k(r,t,!0))return a===l.v.UPDATE_URL&&C(n,r),y(f.Ll,e),(0,i.basename)(r)}else a===l.v.UPDATE_URL&&C(n,e)}return""},[n,v,y,C,k]),{openTransferDialog:S}=(0,r.Z)();return{onDragLeave:d,onDragOver:e=>{m?.(e),(0,h.nK)(e)},onDrop:a=>{if(!f.my.has((0,h.RT)(t))){if(w&&a.target instanceof HTMLElement){let{files:e,text:n}=(0,s.p4)(a);if(0===e.length&&""===n)return;let r={x:a.clientX,y:a.clientY},l=[];if(n){try{l=JSON.parse(n)}catch{}if(!Array.isArray(l))return;let[e]=l;if(!e||e.startsWith(t)&&(0,i.basename)(e)===(0,i.relative)(t,e))return;l=l.map(e=>(0,i.basename)(e))}else l=e instanceof FileList?[...e].map(e=>e.name):[...e].map(e=>e.getAsFile()?.name||"").filter(Boolean);l=l.map(e=>{if(!b[`${t}/${e}`])return e;let n=0,a="";do n+=1,a=`${t}/${(0,i.basename)(e,(0,i.extname)(e))} (${n})${(0,i.extname)(e)}`;while(b[a]);return(0,i.basename)(a)}),(0,h.vi)(t,a.target,b,g,r,l,p)}(0,s.WG)(a,e||x,t,S,!!n)}}}}}}]);